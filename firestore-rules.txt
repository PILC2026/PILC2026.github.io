// Firestore Security Rules for BioMedix
// 
// ⚠️ CRITICAL: You MUST copy these rules to Firebase Console
// 1. Go to: https://console.firebase.google.com
// 2. Select project: biomedix-19988
// 3. Go to: Firestore Database → Rules (left sidebar)
// 4. Copy everything below this line and paste it there
// 5. Click "Publish"
//
// Without updating these rules, registration will fail with "Missing or insufficient permissions"

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Users collection
    match /users/{userId} {
      // Allow ANYONE to create new user (for registration)
      allow create: if true;
      
      // Allow read of any user document (needed for login)
      allow read: if true;
      
      // Allow update of any user document (needed for admin approval)
      allow update: if true;
      
      // Allow listing all users (needed for admin dashboard)
      allow list: if true;
    }
  }
}

// NOTE: These rules are permissive for development. 
// For production, you should restrict based on authentication and roles.